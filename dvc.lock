schema: '2.0'
stages:
  get_data:
    cmd: python scripts/get_data.py
    deps:
    - path: scripts/get_data.py
      hash: md5
      md5: 900657c99943c1eb0b2a24bdb2d07f4b
      size: 534
    params:
      params.yaml:
        get_data:
          dataset_url: 
            https://raw.githubusercontent.com/datasciencedojo/datasets/master/titanic.csv
          out_path: data/raw/titanic.csv
    outs:
    - path: data/raw
      hash: md5
      md5: 5462f90f9dc17707f448ff97428ca171.dir
      size: 60302
      nfiles: 1
  preprocess:
    cmd: python scripts/preprocess_spark.py
    deps:
    - path: data/raw
      hash: md5
      md5: 5462f90f9dc17707f448ff97428ca171.dir
      size: 60302
      nfiles: 1
    - path: expectations/schemas/titanic.yaml
      hash: md5
      md5: 796105b9597f396cc5333f125a72737c
      size: 754
    - path: scripts/preprocess_spark.py
      hash: md5
      md5: d030d0acebbebae8ed3201ccfbf520fd
      size: 3515
    params:
      params.yaml:
        preprocess:
          output_dir: features
    outs:
    - path: features
      hash: md5
      md5: adf6df82b36272a6f4f2b321f106af0c.dir
      size: 6370
      nfiles: 4
  train:
    cmd: python src/train.py
    deps:
    - path: features
      hash: md5
      md5: adf6df82b36272a6f4f2b321f106af0c.dir
      size: 6370
      nfiles: 4
    - path: src/train.py
      hash: md5
      md5: e85221a98d18af97c14b0d97ad08bce5
      size: 10147
    outs:
    - path: models
      hash: md5
      md5: 0fb211d1ae2a1a24fee33551181c572e.dir
      size: 1870
      nfiles: 1
    - path: reports/metrics.json
      hash: md5
      md5: 48fd8a1ae39b4240c38e1b0350350e89
      size: 436
    - path: reports/plots
      hash: md5
      md5: ca4bc9ec11325ec2cd7945d858f8d391.dir
      size: 130091
      nfiles: 6
  validate_raw:
    cmd: python scripts/validate_raw_titanic.py
    deps:
    - path: data/raw/titanic.csv
      hash: md5
      md5: 61fdd54abdbf6a85b778e937122e1194
      size: 60302
    - path: scripts/validate_raw_titanic.py
      hash: md5
      md5: 53124f6afd4f0e8934050d9aa1411538
      size: 1612
  validate_features:
    cmd: python scripts/validate_features.py
    deps:
    - path: features
      hash: md5
      md5: adf6df82b36272a6f4f2b321f106af0c.dir
      size: 6370
      nfiles: 4
    - path: scripts/validate_features.py
      hash: md5
      md5: 83ae2ce9f1375d12333d80936d69faf2
      size: 925
